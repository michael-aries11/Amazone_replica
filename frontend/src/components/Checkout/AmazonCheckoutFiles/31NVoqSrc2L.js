(function(f){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,a=q?q("AddressUIWidgetsServiceAssets",""):p;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,p,q){f.when("A","identity-address-ui-widgets-form-helper","address-form-helper","client-side-counters-util","ready").execute(function(a,b,c,e){function g(g){c.onPageTransitionStart(h("#address-ui-checkout-form"));a.post("/gp/identity/address/widgets/form/handlers/create-address-form-handler.html",
{contextType:"application/json",accepts:"text/html;charset\x3dUTF-8",params:{payLoad:JSON.stringify(g)},success:function(a){e.incrementCounter("CreateAddressPostResponseSuccess");c.onPageTransitionComplete(h("#address-ui-checkout-form"));b.handlePostResponse(a)},error:function(){e.incrementCounter("CreateAddressPostResponseFailure");c.onPageTransitionComplete(h("#address-ui-checkout-form"))}})}var h=a.$;a.on("checkout:popoverContentLoaded:add-address",function(a){b.bindFormWithPostMethod("address-ui-checkout-form",
g)});0==h('[name\x3d"address-ui-widgets-original-address-id"]').length&&b.bindFormWithPostMethod("address-ui-checkout-form",g)});"use strict";f.when("A","identity-address-ui-widgets-form-helper","address-form-helper","client-side-counters-util","ready").execute(function(a,b,c,e){function g(g){c.onPageTransitionStart(h("#address-ui-checkout-form"));a.post("/gp/identity/address/widgets/form/handlers/edit-address-form-handler.html",{contextType:"application/json",accepts:"text/html;charset\x3dUTF-8",
params:{payLoad:JSON.stringify(g)},success:function(a){e.incrementCounter("EditAddressPostResponseSuccess");c.onPageTransitionComplete(h("#address-ui-checkout-form"));b.handlePostResponse(a)},error:function(){e.incrementCounter("EditAddressPostResponseFailure");c.onPageTransitionComplete(h("#address-ui-checkout-form"))}})}var h=a.$;a.on("checkout:popoverContentLoaded:edit-address",function(a){b.bindFormWithPostMethod("address-ui-checkout-form",g)});0<h('[name\x3d"address-ui-widgets-original-address-id"]').length&&
b.bindFormWithPostMethod("address-ui-checkout-form",g)});"use strict";f.when("A","a-checkbox","a-alert","ready").execute(function(a,b,c){function e(){d=c("#address-ui-widgets-addr-details-business-hours-opt-out-sat-alert");r=c("#address-ui-widgets-addr-details-business-hours-opt-out-sun-alert");m=c("#address-ui-widgets-addr-details-business-hours-opt-out-weekend-alert")}function g(b,c,d,e,g){var h=!1;a.each(arguments,function(a){a=typeof a===q||null===a?!0:void 0;a&&(h=!0)});h||(b.isChecked()?d.isChecked()?
(c.hide(),e.hide(),g.hide()):(c.hide(),g.hide(),e.show()):d.isChecked()?(e.hide(),g.hide(),c.show()):(c.hide(),e.hide(),g.show()))}function h(){var a=b("#address-ui-widgets-addr-details-sat").isChecked(),c=b("#address-ui-widgets-addr-details-sun").isChecked(),a=a&&c?"BOTH":a?"SAT":c?"SUN":"NONE";l("input[name\x3d'address-ui-widgets-addr-details-business-hours']").val(a)}function D(){var a=b("#address-ui-widgets-addr-details-sat").isChecked(),c=b("#address-ui-widgets-addr-details-sun").isChecked();
return a&&c?"-both":a?"-sat":c?"-sun":"-none"}var l=a.$,d,r,m;a.on("ajax_reload",function(){e()});e();f.when("a-secondary-view","ready").execute(function(c){a.declarative("weekend-availability-secondary-view-save","click",function(b){if(b=c.get(b.data.popoverName)){a.state.parse();var d=a.state("address-details-business-hours-expander-heading-strings")["business-hours-expander-heading-text"+D()];l("#address-ui-checkout-business-hours-button-heading-text").text(d);b.hide()}})});a.declarative("address-ui-widgets-addr-details-business-hrs-checkbox-change",
"change",function(a){h();"address-ui-widgets-addr-details-sat"===a.$target.attr("id")?g(b("#address-ui-widgets-addr-details-sat"),d,b("#address-ui-widgets-addr-details-sun"),r,m):g(b("#address-ui-widgets-addr-details-sun"),r,b("#address-ui-widgets-addr-details-sat"),d,m)});a.on("a:expander:address-ui-widgets-addr-details-business-hours-expander:toggle:collapse",function(){a.state.parse();var c=a.state("address-details-business-hours-expander-heading-strings")["business-hours-expander-heading-text"+
D()];l("#address-ui-widgets-addr-details-business-hours-expander-heading-text").text(c)});a.on("a:expander:address-ui-widgets-addr-details-business-hours-expander:toggle:expand",function(){"OTH"===l("input[name\x3d'address-ui-widgets-addr-details-business-hours']").val()&&h()})});"use strict";f.when("A","ready").execute(function(a){var b=a.$;a.declarative("address-ui-widgets-suggestions-submit-action",["click"],function(a){var e=b("input[type\x3d'hidden'][name\x3d'address-ui-checkout-suggestions-submit-button-input']");
"EDIT_ADDRESS"===a.$target["0"].value&&e.val("EDIT_ADDRESS")})});"use strict";f.when("A","ready").execute(function(a){var b=a.$;a.declarative("addrui-widgets-addr-suggestion-select-action",["change"],function(a){a=a.$currentTarget.closest(".addrui-widgets-addr-suggestion-entry");a.hasClass("addrui-widgets-addr-suggestion-active-box")||(b("div.addrui-widgets-addr-suggestion-entry.addrui-widgets-addr-suggestion-active-box").removeClass("addrui-widgets-addr-suggestion-active-box").addClass("addrui-widgets-addr-suggestion-inactive-box"),
a.removeClass("addrui-widgets-addr-suggestion-inactive-box").addClass("addrui-widgets-addr-suggestion-active-box"))})});"use strict";f.when("A","customer-authentication-helper","address-form-helper","client-side-counters-util").register("identity-address-ui-widgets-form-helper",function(a,b,c,e){function g(a){var b={},c;for(c in a)b[a[c].name]=a[c].value;return b}function h(){f("#address-ui-checkout-form").find("input[type\x3dsubmit]").click(function(a){l=this})}var f=a.$,l=null;return{handlePostResponse:function(d){null!==
d?b.checkAndHandleCustomerAuth(d.customerAuthenticationResponse)&&(d=d.createOrEditAddressResponse,null!==d?null===d.addressId&&null!==d.html?(e.incrementCounter("EmptyAddressIdInCreateOrEditAddressResponse"),f("#address-ui-widgets-enterAddressFormContainer").replaceWith(d.html),h(),a.trigger("ajax_reload")):null!==d.addressId&&(d={addressId:d.addressId},e.incrementCounter("CreateOrEditAddressSetDestination"),c.setDestination(d)):e.incrementCounter("EmptyCreateOrEditAddressResponse")):e.incrementCounter("EmptyCreateOrEditAjaxPostResponse")},
bindFormWithPostMethod:function(a,b){var c=f("#"+a);if("undefined"===typeof c.data("events")||"undefined"===typeof c.data("events").submit)h(),c.submit(function(a){a.preventDefault();a=g(c.serializeArray());null!=l&&""!=l.name&&(a[l.name]=l.value);b(a)})},formatFormData:g}});"use strict";f.when("A","client-side-counters-util").register("customer-authentication-helper",function(a,b){return{checkAndHandleCustomerAuth:function(a){if(null!==a&&null!==a.authRequired)return"true"==a.authRequired?(null!==
a.redirectionUrl&&(p.location.href=a.redirectionUrl),!1):!0;b.incrementCounter("CustomerUnauthenticated");return!1}}});"use strict";f.when("A","ready").execute(function(a){var b=a.$;a.declarative("addrui-widgets-addr-suggestion-select-action",["change"],function(a){a=a.$currentTarget.closest(".addrui-widgets-addr-suggestion-radio-option");a.hasClass("addrui-widgets-addr-suggestion-radio-selected-option")||(b("div.addrui-widgets-addr-suggestion-radio-option.addrui-widgets-addr-suggestion-radio-selected-option").removeClass("addrui-widgets-addr-suggestion-radio-selected-option").addClass("addrui-widgets-addr-suggestion-radio-unselected-option"),
a.removeClass("addrui-widgets-addr-suggestion-radio-unselected-option").addClass("addrui-widgets-addr-suggestion-radio-selected-option"))})});"use strict";f.register("client-side-counters-util",function(){return{incrementCounter:function(a){a="AddressUIWidgetsService_Checkout:"+a;var b=p.ue;if(b&&"function"===typeof b.count){var c=(b.count(a)||0)+1;b.count(a,c)}}}});"use strict";f.when("A").register("ajax-request-builder",function(a){var b=a.$;return{buildAJAXRequest:function(a,e,g){a={operation:a,
data:e,ajaxToken:g};e=b("input[name\x3d'address-ui-widgets-original-address-id']");e!==q&&null!==e&&(a.data["address-ui-widgets-original-address-id"]=e.val());return a}}});f.when("A","a-dropdown","a-alert","ajax-request-builder","page-state-helper","client-side-counters-util","ready").execute(function(a,b,c,e,g,h){function f(){x=k("#address-ui-widgets-countryCode").val();"AU"==x&&(a.state.parse(),v=b.getSelect("#address-ui-widgets-enterAddressCity-dropdown-nativeId"),A=c("#address-ui-widgets-au-autopopulation-postalcode-error"),
G=k("#address-ui-widgets-enterAddressPostalCode").val(),B=k("#address-ui-widgets-enterAddressPostalCode"),n=b.getSelect("#address-ui-widgets-enterAddressCity-dropdown-nativeId")||k("#address-ui-widgets-enterAddressCity"),t=b.getSelect("#address-ui-widgets-enterAddressStateOrRegion-dropdown-nativeId")||k("#address-ui-widgets-enterAddressStateOrRegion"),u=n.val()?n.val().toUpperCase():"",C=t.val()?t.val().toUpperCase():"",a.on("a:dropdown:selected:address-ui-widgets-enterAddressCity",function(a){y(a.value,
E("au-addr-form-cityStateData"))}),k("#address-ui-widgets-enterAddressPostalCode").bind("input",l),v&&4>B.val().length?(z(),w()):v&&m())}function l(){A.hide();var b=B.val();v&&4>b.length?(z(),w()):v&&4===b.length&&(b===G?m():(b={"address-ui-widgets-enterAddressFullName":k("#address-ui-widgets-enterAddressFullName").val(),"address-ui-widgets-enterAddressPhoneNumber":k("#address-ui-widgets-enterAddressPhoneNumber").val(),"address-ui-widgets-enterAddressLine1":k("#address-ui-widgets-enterAddressLine1").val(),
"address-ui-widgets-enterAddressLine2":k("#address-ui-widgets-enterAddressLine2").val(),"address-ui-widgets-enterAddressPostalCode":b,"address-ui-widgets-enterAddressCity":n.val(),"address-ui-widgets-enterAddressStateOrRegion":t.val(),"address-ui-widgets-countryCode":x,"address-ui-widgets-addressFormButtonText":k("input[name\x3d'address-ui-widgets-addressFormButtonText']").val(),"address-ui-widgets-addressFormHideHeading":k("input[name\x3d'address-ui-widgets-addressFormHideHeading']").val(),"address-ui-widgets-enableImportContact":k("input[name\x3d'address-ui-widgets-enableImportContact']").val(),
"address-ui-widgets-enableAddressDetails":k("input[name\x3d'address-ui-widgets-enableAddressDetails']").val(),"address-ui-widgets-enableAddressTips":k("input[name\x3d'address-ui-widgets-enableAddressTips']").val(),"address-ui-widgets-returnLegacyAddressID":k("input[name\x3d'address-ui-widgets-returnLegacyAddressID']").val(),"address-ui-widgets-addressFormHideSubmitButton":k("input[name\x3d'address-ui-widgets-addressFormHideSubmitButton']").val(),"address-ui-widgets-previous-address-form-state":k("input[name\x3d'address-ui-widgets-previous-address-form-state']").val(),
"address-ui-widgets-previous-address-form-state-token":k("input[name\x3d'address-ui-widgets-previous-address-form-state-token").val()},b=e.buildAJAXRequest("AustraliaAutopopulation",b,g.getAjaxToken()),a.post(g.getAjaxURLPrefix()+"/addresses/ajax",{contextType:"application/json",accepts:"text/html;charset\x3dUTF-8",params:{data:JSON.stringify(b)},success:d(r),error:h.incrementCounter("AUAutopopulationFailure")})))}function d(a){return function(b){!0===b.requiresAuth?p.location.reload(!0):a(b)}}function r(c){c!==
q&&null!==c?(c=c.data,null!==c&&"false"===c.isAjaxError?(k("#address-ui-widgets-enterAddressFormContainer").replaceWith(c.addressFormHTML),b.getSelect('[name\x3d"address-ui-widgets-countryCode"]').val(x),a.trigger("ajax_reload"),h.incrementCounter("AUAutopopulationSuccess")):h.incrementCounter("AUAutopopulationFailure")):h.incrementCounter("AUAutopopulationFailure")}function m(){b.getSelect("#address-ui-widgets-enterAddressCity-dropdown-nativeId").update({status:"normal"});var a=E("au-addr-form-cityStateData"),
c=Object.keys(a);u&&-1<c.indexOf(u)?(n.setValue(u),y(u,a)):0<n.val().length?F():0===n.getOptions().size()?(z(),w(),A.show()):1===n.getOptions().size()?(c=n.getOption(0).options.elements[0][0].value,n.setValue(c),y(c,a)):(n.setValue(),w())}function y(a,b){F();t.removeOptions();b=b[a];var c=[];b.forEach(function(a){c.push({value:a[0],text:a[1]})});t.addOptions(c);if(u===a){var d=[];b.forEach(function(a){d.push(a[0])});-1<d.indexOf(C)?t.setValue(C):t.setValue(b[0][0])}else t.setValue(b[0][0])}function E(b){return a.state(b)?
a.state(b):!1}function F(){b.getSelect("#address-ui-widgets-enterAddressStateOrRegion-dropdown-nativeId").update({status:"normal"})}function z(){b.getSelect("#address-ui-widgets-enterAddressCity-dropdown-nativeId").update({status:"disabled"})}function w(){b.getSelect("#address-ui-widgets-enterAddressStateOrRegion-dropdown-nativeId").update({status:"disabled"})}var k=a.$,v,A,G,x,B,n,t,u,C;a.on("ajax_reload",function(a){f()});a.on("checkout:popoverContentLoaded:edit-address",function(a){f()})});"use strict";
f.when("A").register("page-state-helper",function(a){return{getAjaxToken:function(){a.state.parse();return a.state("identity-address-ux-ajax-data")["identity-address-ux-ajax-auth-token"]},getAjaxURLPrefix:function(){a.state.parse();var b=a.state("identity-address-ux-ajax-data")["identity-address-ux-ajax-domain"];return b?p.location.protocol+"//"+b:""}}});f.when("A","a-dropdown","a-alert","ajax-request-builder","page-state-helper","client-side-counters-util","ready").execute(function(a,b,c,e,g,h){function f(a){c("#address-ui-checkout-inlineAlert").show();
h.incrementCounter("AddressFormReloadFailure");b.getSelect('[name\x3d"address-ui-widgets-countryCode"]').val(a)}function l(a){a={"address-ui-widgets-countryCode":a,"address-ui-widgets-addressFormButtonText":d("input[name\x3d'address-ui-widgets-addressFormButtonText']").val(),"address-ui-widgets-addressFormHideHeading":d("input[name\x3d'address-ui-widgets-addressFormHideHeading']").val(),"address-ui-widgets-enableImportContact":d("input[name\x3d'address-ui-widgets-enableImportContact']").val(),"previous-value-address-ui-widgets-countryCode":d("input[name\x3d'previous-value-address-ui-widgets-countryCode']").val(),
"address-ui-widgets-enableAddressDetails":!0,"address-ui-widgets-enableEmailAddress":d("input[name\x3d'address-ui-widgets-enableEmailAddress']").val(),"address-ui-widgets-enableAddressTips":d("input[name\x3d'address-ui-widgets-enableAddressTips']").val(),"address-ui-widgets-returnLegacyAddressID":d("input[name\x3d'address-ui-widgets-returnLegacyAddressID']").val(),"address-ui-widgets-addressFormHideSubmitButton":d("input[name\x3d'address-ui-widgets-addressFormHideSubmitButton']").val(),"address-ui-widgets-previous-address-form-state":d("input[name\x3d'address-ui-widgets-previous-address-form-state']").val(),
"address-ui-widgets-previous-address-form-state-token":d("input[name\x3d'address-ui-widgets-previous-address-form-state-token").val()};return e.buildAJAXRequest("AddressFormCountrySwitch",a,g.getAjaxToken())}var d=a.$,r=b.getSelect('[name\x3d"address-ui-widgets-countryCode"]');if(r!==q&&null!==r){var m=r.val();a.on("a:dropdown:selected:address-ui-widgets-countryCode",function(b){h.incrementCounter("AddressFormCountryDropdownChange");var e=b.value;"AU"!=m&&"AU"!=e||a.post(g.getAjaxURLPrefix()+"/addresses/ajax",
{contextType:"application/json",accepts:"text/html;charset\x3dUTF-8",params:{data:JSON.stringify(l(e))},success:function(b){!0===b.requiresAuth?p.location.reload(!0):b!==q&&null!==b&&b.data!==q&&null!==b.data?(b=b.data,"false"===b.isAjaxError?(d("#address-ui-widgets-enterAddressFormContainer").replaceWith(b.addressFormHTML),c("#address-ui-widgets-addr-form-switch-alert-box").hide(),m=e,a.trigger("ajax_reload")):f(m)):f(m)},error:function(){f(m)}})})}})});
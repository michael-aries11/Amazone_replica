(function(f){var u=window.AmazonUIPageJS||window.P,v=u._namespace||u.attributeErrors,a=v?v("CheckoutWebappAssets",""):u;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,u,v){f.when("A","jQuery","utils/createClass").register("components/Component",function(a,e,d){var b=d({$el:null,props:{},defaultProps:{},init:function(b){this.$el=e(b.$el);if(1<this.$el.length)throw Error("Component must be attached with only one DOM element");if(!this.$el.length)return this;this.bindAll();
this.props=e.extend({},this.defaultProps,b);this.onInit(this.props)},onInit:e.noop,find:function(b){return this.$el.find(b)},bindAll:function(){for(var b in this)"function"===typeof this[b]&&(this[b]=e.proxy(this[b],this))},data:function(){return this.$el.data.apply(this.$el,arguments)}});b.create=function(b){var d=this;return b.$el.length?a.map(b.$el,function(k){return new d(a.extend({},b,{$el:e(k)}))}):[]};b.extend=function(){function a(d){d=e.call(this,d);d.extend=a;d.create=b.create;return d}
var e=b.extend;return a}();return b});"use strict";f.when("jQuery","components/Component","weblab-helper").register("components/Checkbox",function(a,e,d){return e.extend({checkbox:null,$el:null,defaultProps:{onChange:a.noop},onInit:function(){if(d.isPyoClientSideInitiationEnabled()){if(!this.$el.length||!this.$el.is(":checkbox"))throw Error("[Checkbox] No checkbox input is found");this.$el.bind("change",this.handleChange)}else{if(!this.$el.hasClass("a-checkbox"))throw Error("[Checkbox] Checkbox component must instantiate with an `a-checkbox` element");
this.$input=this.find(":checkbox");if(!this.$input.length)throw Error("[Checkbox] No checkbox input is found");this.$input.bind("change",this.handleChange)}},handleChange:function(b){this.props.onChange(this.isChecked(),this,b)},isChecked:function(){return d.isPyoClientSideInitiationEnabled()?this.$el.is(":checked"):this.$input.is(":checked")},data:function(b,a){return this.$el.data(b,a)}})});"use strict";f.when("A","jQuery","components/Component","components/Checkbox","weblab-helper").register("components/PrimaryActionBlockerCheckbox",
function(a,e,d,b,g){function c(){var b=a.reduce(k,function(b,a){var n="";if(b.blocking)return b;g.isPyoClientSideInitiationEnabled()?(b=a.shouldBlock())&&(n=a.getBlockerMessage()):(b=!a.isChecked())&&(n=a.data("blocker-message"));return{blocking:b,message:n}},{blocking:null,message:""});a.equals(b,l)||(l=b,a.trigger(m.blockingStateChanged,b))}var k=[],l={blocking:null,message:""},m={blockingStateChanged:"checkbox:primaryActionBlocker:blockingStateChanged"};d=d.extend({onInit:function(a){g.isPyoClientSideInitiationEnabled()?
(this.checkbox=new b({$el:this.$el,onChange:c}),this.blockerMessage=a.blockerMessage,k.push(this)):(this.checkbox=new b({$el:this.$el,onChange:c}),k.push(this.checkbox));c()},shouldBlock:function(){return!this.$el.is(":checked")},getBlockerMessage:function(){return this.blockerMessage}});d.events=m;d.tryChangingBlockingState=c;d.getState=function(){return k.length?e.extend({},l):null};var r=g.isPyoClientSideInitiationEnabled()?"checkout:unload":"checkout:beforeReload";a.on(r,function(){k=[];l={blocking:null,
message:""}});return d});"use strict";f.when("A","jQuery","page-transition-controller","page-conductor").register("widgets/ageVerification/removeLineItems",function(a,e,d,b){a.declarative("age-restriction-remove-restricted-items","click",function(a){a=a.data;var c=(new Date).getTime(),k=b.setAjaxTransitionHeader({"x-amz-checkout-page":"agelimitation"});if(b.isSPP()){d.blockAllActions();var l=a.loadingText,m=e("#agelimitation");d.shrinkPanel(m,!0,l)}else d.showPageTransition();e.ajax({type:"POST",
url:a.url+"\x26cachebuster\x3d"+c,data:e.param(a.param,!0),dataType:"text",headers:k,error:b.ajaxRedirect,success:b.ajaxUpdatePage})})});"use strict";f.when("A","jQuery").register("widgets/ageVerification/switchIdForm",function(a,e){a.declarative("age-verification-change-id-dropdown","change",function(a){a=".age-verification-id-"+a.$target.find(":selected").val().toLowerCase().replace(/_/g,"-");var b=e("[name\x3d'age_verification_form']");b.find(".age-verification-id").addClass("aok-hidden");b.find(a).removeClass("aok-hidden")})});
"use strict";f.when("A","jQuery","page-transition-controller","page-conductor").register("widgets/ageVerification/ageVerification",function(a,e,d,b){function g(){var b=e('[name\x3d"age_verification_form"]'),a=b.find('input[name\x3d"dob_input"]');if(a.length)a=k(a.val());else{var d=b.find('[name\x3d"year"]').val(),c=b.find('[name\x3d"month"]').val(),g=b.find('[name\x3d"day"]').val(),a=k(d+"-"+c+"-"+g);if(a.getFullYear()!==Number(d)||a.getMonth()!==Number(c)-1||a.getDate()!==Number(g))return b.find("#dob-error-message").removeClass("aok-hidden"),
!1}d=b.find('input[name\x3d"ageLimitation"]').val();c=new Date;if(c.getFullYear()-a.getFullYear()===Number(d)){if(0<=c.getMonth()-a.getMonth()&&0<=c.getDate()-a.getDate())return!0}else if(c.getFullYear()-a.getFullYear()>Number(d))return!0;b.find("#dob-error-message").removeClass("aok-hidden");return!1}function c(b){var a=!0;b.find(".a-button-error, .a-form-error").removeClass("a-button-error").removeClass("a-form-error").end().find(".calendar-dropdown select, .age-verification-id:visible select, :text:visible, [type\x3ddate]:visible, [type\x3dnumber]:visible").each(function(b,
n){b=e(n);b.val()||(a=!1,"INPUT"===b.prop("tagName")?b.addClass("a-form-error"):b.siblings(".a-button-dropdown").addClass("a-button-error"))});return a?!0:(b.find("#missing-fields-error-message").removeClass("aok-hidden"),!1)}function k(b){b=b.split(/\D/);return new Date(b[0],b[1]-1,b[2])}function l(a){a=r(a);return e.ajax({type:"POST",url:"/gp/buy/agelimitation/handlers/upload-dob.html",data:a,dataType:"text",success:B,error:b.ajaxRedirect})}function m(a){var d=a.data("profile");a=r(a);return e.ajax({type:"POST",
url:"/ap/cvf/request/identity?sif_profile\x3d"+d,data:a,dataType:"json",success:f,error:b.ajaxRedirect})}function r(b){var a=b.serialize();if(!b.find('input[name\x3d"dob_input"]').length){var d=b.find('[name\x3d"year"]').val(),e=b.find('[name\x3d"month"]').val();b=b.find('[name\x3d"day"]').val();d=d+"-"+("0"+e).slice(-2)+"-"+("0"+b).slice(-2);a+="\x26dob_input\x3d"+d}return a}function f(a,d){var c=e('[name\x3d"age_verification_form"]');d=c.find('input[name\x3d"ageLimitation"]').val();c=c.find('input[name\x3d"ivvDomain"]').val();
a={claimToken:a.token,ageLimit:d,ivvDomain:c};d=b.setAjaxTransitionHeader({"x-amz-checkout-page":"agelimitation"});return e.ajax({type:"POST",url:"/gp/buy/agelimitation/handlers/decode.html",data:a,dataType:"text",headers:d,success:q,error:b.ajaxRedirect})}function q(a,c,g){var l=a.trim(),m;-1!==l.indexOf("newRequestToken\x3d")&&(m=l.split("\x3d")[1]);m?(b.isSPP()?(a=e("#agelimitation"),a.removeClass("spp-panel.collapsed"),a.addClass("spp-panel.expanded"),c=a.find(".panel-content"),a.find(".shrink-placeholder").hide(),
c.show(),d.unblockAllActions()):d.hide(),a=e('[name\x3d"age_verification_form"]'),a.find("#id-error-message").removeClass("aok-hidden"),a.find('input[name\x3d"requestToken"]').val(m)):b.ajaxUpdatePage(a,c,g)}function B(a,c,g){null!==g&&null===g.getResponseHeader("x-amz-checkout-agelimitation-embu-write-failed")?b.ajaxUpdatePage(a,c,g):(b.isSPP()?(a=e("#agelimitation"),a.removeClass("spp-panel.collapsed"),a.addClass("spp-panel.expanded"),c=a.find(".panel-content"),a.find(".shrink-placeholder").hide(),
c.show(),d.unblockAllActions()):d.hide(),e('[name\x3d"age_verification_form"]').find("#upload-error-message").removeClass("aok-hidden"))}e(document.documentElement).delegate('[name\x3d"age_verification_form"]',"submit",function(a){a.preventDefault();a=e(a.target);a.find("#dob-error-message").addClass("aok-hidden");a.find("#id-error-message").addClass("aok-hidden");a.find("#missing-fields-error-message").addClass("aok-hidden");if(c(a)&&g()){if(b.isSPP()){d.blockAllActions();var k=a.data("loadingtext"),
r=e("#agelimitation");d.shrinkPanel(r,!0,k)}else d.showPageTransition();"true"===a.find('input[name\x3d"isDateOfBirthOnlyEnabled"]').val()?l(a):m(a)}});return{validateDateOfBirth:g,validateForm:c,callCVF:m,submitDateOfBirthForm:l,decodeClaimToken:f,verifyServiceResult:q,verifyDateOfBirthUploadResult:B}});"use strict";f.when("A","jQuery","gift-utility","a-checkbox","page-transition-controller","a-truncate","email-validation","widgets/giftOptions/giftOptionsSaveControls").register("widgets/giftOptions/giftOptions",
function(a,e,d,b,g,c,k,l){function m(a){return h.find("#message-area-"+a)}function r(a){return h.find("#message-counter-"+a)}function f(a){return b("#gift-wrap-checkbox-"+a,h)}function q(a){return b("#digital-gift-message-checkbox-"+a,h)}function B(a){return h.find("#digital-gift-message-input-wrapper-"+a)}function n(a){return h.find("#digital-gift-message-text-input-"+a)}function u(a){return h.find("#gift-message-sender-input-"+a)}function v(a){return b("#toggle-gift-item-checkbox-"+a,h)}function C(a){a.addClass("aok-hidden")}
function D(a){a.removeClass("aok-hidden")}function x(a,b){b?D(a):C(a)}function y(a){a.prop("disabled",!0);a.removeClass("a-form-normal").addClass("a-form-disabled")}function z(a){a.prop("disabled",!1);a.removeClass("a-form-disabled").addClass("a-form-normal")}function J(a){C(a.find(".gift-options-summary-header"));D(a.find(".gift-options-expanded-header"))}function K(a){return 0!==q(a).size()&&q(a).isChecked()}function L(a,b,d){var c=r(a).find("."+b+"-counter");a=c.find(".count");b=c.find(".message");
var e=Math.abs(d),c=c.data("messageData");d=0<d?"remaining":"over";var g=1===e?"single":"multiple";a.text(e);b.text(c[d][g])}function M(a,b){a=r(a);a.data("newCounterWeblabOn")?a.find(".counter-text").toggleClass("a-color-error",!b):a.toggleClass("a-color-error",!b)}function E(a){if(0<m(a).size()){var b=m(a).closest("[data-message-validation-options]").data("messageValidationOptions"),c=m(a),g=u(a),l=q(a),f=c.val(),t=g.val(),p;p=t?"\n"+Array(N+1).join("X")+t:"";p=f+p;var w=r(a).data("newCounterWeblabOn"),
A=d.getLineCount(p,b.maxLineLength),A=b.maxLines-A;w?L(a,"lines",A):h.find("#remaining-lines-count-"+a).text(A);A=b.maxChars-p.length;w?L(a,"chars",A):h.find("#remaining-char-count-"+a).text(A);w=0<v(a).size()?!v(a).isChecked():!1;w?(y(c),y(g),l.disable(),M(a,!0),delete F[a]):(z(c),z(g),l.enable(),c=d.getLineCount(p,b.maxLineLength),g=p.length,c=c>b.maxLines||g>b.maxChars,p=l=g=!1,b.validateDigitalGiftMessage&&(e.trim(t)||b.senderNameIsOptional||(g=!0),d.valueContainsUrl(f)&&(l=!0),d.valueContainsUrl(t)&&
(p=!0)),x(h.find("#message-length-warning-"+a),c),x(h.find("#message-url-warning-"+a),l),x(h.find("#sender-name-url-warning-"+a),p),x(h.find("#sender-name-empty-warning-"+a),g),b=!c&&!g&&!l&&!p,f=h.find("#recipient-not-email-warning-"+a),K(a)?(t=(t=n(a).val())&&k(t),x(f,!t),f=t):(x(f,!1),f=!0),b=b&&f,M(a,b),b?delete F[a]:F[a]=!0);e.isEmptyObject(F)?G.enable():G.disable()}}function O(){var b=a.state("giftPageState");return b&&b.lineItemCount?b.lineItemCount:0}var h,F={},N=5,G,H=function(b){F={};h=
e(b||"#giftOptions-contains");G=l(h);h.find(".a-truncate").each(function(){c.get(this).update()});h.find(".gift-message-textarea textarea").trigger("change");h.find(".digital-gift-message-checkbox").trigger("change");(b=a.state("giftPageState"))&&b.localizedFromStringLength&&(N=b.localizedFromStringLength)};a.declarative("chewbacca-toggle-gift-item","change",function(a){a=a.data.lineItemIndex;if(v(a).isChecked()){z(m(a));var b=u(a);b&&z(b);0!==q(a).size()&&(q(a).enable(),z(n(a)));0!==f(a).size()&&
f(a).enable();b=h.find('input[name\x3d"wrap.'+a+'"]');0!==b.size()&&b.prop("disabled",!1);D(h.find("#gift-options-box-"+a))}else y(m(a)),(b=u(a))&&y(b),0!==q(a).size()&&(b=q(a),b.uncheck(),b.disable(),y(n(a))),0!==f(a).size()&&(b=f(a),b.uncheck(),b.disable()),b=h.find('input[name\x3d"wrap.'+a+'"]'),0!==b.size()&&(h.find("#gift-wrap-radio-"+a+"-none").click(),b.prop("disabled",!0)),C(h.find("#gift-options-box-"+a));E(a)});a.declarative("chewbacca-gift-message-textarea","change keyup click focus",function(a){"textarea"===
a.targetTag&&h&&E(a.data.lineItemIndex)});a.declarative("chewbacca-sender-name-input","change keyup click focus",function(a){"input"===a.targetTag&&E(a.data.lineItemIndex)});a.declarative("chewbacca-digital-gift-message-checkbox","change",function(a){a=a.data.lineItemIndex;K(a)?(z(n(a)),z(B(a))):(y(n(a)),y(B(a)));E(a)});a.declarative("chewbacca-recipient-contact-details","change keyup click focus",function(a){var b=a.data.lineItemIndex;if("change"===a.type){a=n(b);var c=a.val();c!==e.trim(c)&&a.val(e.trim(c))}E(b)});
a.declarative("chewbacca-gift-options-submit","submit",function(){g.showPageTransition()});a.declarative("chewbacca-discard-gift-options","click",function(a){b(".toggle-gift-checkbox",h).uncheck();e("#giftOptions").submit()});a.on("a:expander:chewbacca-gift-options-expander:toggle:collapse",function(a){a=a.expander.$expander;var b=a.data("lineitemindex"),c;c=m(b).val();c=!c||10>=c.length?c||"":c.substring(0,10)+"...";var d=0<c.length,b=h.find('input[name\x3d"wrap.'+b+'"]:checked').val()||"";d||b?
(D(a.find(".gift-options-summary-header")),C(a.find(".gift-options-expanded-header")),x(a.find(".gift-message-summary"),d),a.find(".gift-message-preview").text(c),C(a.find(".gift-wrap-summary")),D(a.find(".gift-wrap-summary-"+b.replace(/#/g,"\\#")))):J(a)});a.on("a:expander:chewbacca-gift-options-expander:toggle:expand",function(a){J(a.expander.$expander)});a.on("checkout:reload:giftselect",function(){H()});a.on("checkout:reload:spp-giftoptions",function(){H()});for(var I=0;I<O();++I)(function(b){a.on("a:popover:show:changeGiftOptionsPopover"+
b,function(){H("#giftOptions-contains"+b)})})(I)});"use strict";f.when("A").register("widgets/giftOptions/giftOptionsSaveControls",function(a){return function(e){function d(){return e.find(".chewbacca-enabled-save-gift-options-button")}function b(){return e.find(".chewbacca-disabled-save-gift-options-button")}function g(){a.trigger("orderSummary:primaryActionButton:mirrorPanelBtnState")}return{disable:function(){b().removeClass("aok-hidden");d().addClass("aok-hidden");g()},enable:function(){d().removeClass("aok-hidden");
b().addClass("aok-hidden");g()}}}});"use strict";f.when("A","jQuery","components/PrimaryActionBlockerCheckbox","weblab-helper","client-side-metrics").register("widgets/purchaseLevelMessages/blockingConfirmationMessages",function(a,e,d,b,g){function c(){b.isPyoClientSideInitiationEnabled()||d.create({$el:e('#purchase-level-messages [data-client-component\x3d"PrimaryActionBlockerCheckbox"]')})}a.each(["checkout:reload:spc","checkout:reload:spclite","checkout:reload:spp-revieworder","checkout:reload:spp-collapsed"],
function(b){a.on(b,c)})});f.when("A","jQuery","components/Component","components/PrimaryActionBlockerCheckbox","verification-checkbox-controller").register("widgets/pyoButton/PyoButton",function(a,e,d,b,g){return d.extend({onInit:function(){var c=b.getState();this.block(c);a.on(b.events.blockingStateChanged,this.block)},block:function(a){a&&g.updatePyo(a)}})});"use strict";f.when("A","jQuery","weblab-helper","widgets/subscribeAndSave/snsCommon").execute("widgets/subscribeAndSave/setSnSOptions",function(a,
e,d,b){function g(a,c,g,f){var k=b.getSnSItemData(a);c={asin:k.asin,encodedLineItemId:k.lineItemId,encryptedMerchantId:k.encryptedMerchantId,merchantSku:k.merchantSku,couponId:e("#sns-item-discount-"+a).data("couponId"),redeemCoupon:b.convertToPerlBoolean(f),optedIn:b.convertToPerlBoolean(c)};d.isGdModelUpdateEnabled()?c.customerSelectedRecurrencePeriod=g:(c.customerSelectedFrequency=g,c.mostCommonFrequency=e("#sns-frequency-accordion-"+a).data("mostCommonFrequency"));b.updatePurchase([c])}function c(a){a=
a.selectedRow.$row.data();var c=a.index,e;e=d.isGdModelUpdateEnabled()?a.recurrencePeriod:a.frequency;var w=b.isCustomerOptedIn("#sns-item-checkbox-",c);w?g(c,w,e,!1):b.setActiveSubscriptionRecurrencePeriod(f,a)}var f;f=d.isGdModelUpdateEnabled()?"#sns-recurrence-period-selector-":"#sns-frequency-selector-";a.declarative("sns-item-checkbox","change",function(a){a=a.data.index;var c=b.isCustomerOptedIn("#sns-item-checkbox-",a),d=b.getActiveSubscriptionRecurrencePeriod(f,a);g(a,c,d,!0)});if(d.isGdModelUpdateEnabled())a.on("a:accordion:sns-recurrence-period-accordion:select",
c);else a.on("a:accordion:sns-frequency-accordion:select",c)});"use strict";f.when("jQuery","page-transition-controller","page-conductor","weblab-helper").register("widgets/subscribeAndSave/snsCommon",function(a,e,d,b){return{convertToPerlBoolean:function(a){return a?1:0},getSnSItemData:function(b){return a("#sns-item-"+b).data()},isCustomerOptedIn:function(b,c){return a(b+c).is(":checked")},updatePurchase:function(b,c){var f=d.setAjaxTransitionHeader({"x-amz-checkout-page":"spc"});e.show();a.ajax({type:"POST",
url:"/gp/buy/spc/handlers/set-subscribe-and-save-options.html",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",data:{subscriptionParameters:JSON.stringify(b)},dataType:"text",cache:!1,async:!0,headers:f,success:function(a,b,g){"function"===typeof c&&(c(),e.hide());d.ajaxUpdatePage(a,b,g)},error:function(a,b,c){d.ajaxRedirect(a,b,c)}})},setActiveSubscriptionRecurrencePeriod:function(d,c){b.isGdModelUpdateEnabled()?a(d+c.index).text(c.recurrencePeriodText).data("activeRecurrencePeriod",
c.recurrencePeriod):a(d+c.index).text(c.frequencyText).data("activeFrequency",c.frequency)},getActiveSubscriptionRecurrencePeriod:function(d,c){return b.isGdModelUpdateEnabled()?a(d+c).data("activeRecurrencePeriod"):a(d+c).data("activeFrequency")}}});f.when("A").register("utils/createClass",function(a){function e(){}if(a.createClass)return a.createClass;var d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;e.extend=function(a){var g=this.prototype,c=Object.create?Object.create(g):function(a){function b(){}
b.prototype=a;return new b}(g),f;for(f in a)c[f]="function"===typeof a[f]&&"function"===typeof g[f]&&d.test(a[f])?function(a,b){return function(){var c=this._super;this._super=g[a];var d=b.apply(this,arguments);this._super=c;return d}}(f,a[f]):a[f];a="function"===typeof c.init?c.hasOwnProperty("init")?c.init:function(){g.init.apply(this,arguments)}:function(){};a.prototype=c;c.constructor=a;a.extend=e.extend;return a};return function(a){return e.extend(a)}});"use strict";f.when("A","ready").register("widgets/pointsRedemption/pointsRedemption",
function(){})});